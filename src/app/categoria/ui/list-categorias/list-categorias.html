@if (loading) {
<ui-loading-progress-bar></ui-loading-progress-bar>
}
<p-table #dt1 [value]="listCategorias()" [globalFilterFields]="['nombre', 'descripcion', 'accion']"
    selectionMode="single" dataKey="id" [tableStyle]="{ 'min-width': '50rem' }" [rows]="20" [paginator]="true"
    [rowsPerPageOptions]="[20,100,1000]"
    paginatorTemplate="RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink"
    currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} registros" stateStorage="session"
    stateKey="statedemo-session">

    <ng-template #caption>
        <div class="flex justify-between gap-2">
            <p-iconfield iconPosition="left" class="w-full">
                <p-inputicon>
                    <i class="pi pi-search"></i>
                </p-inputicon>
                <input class="w-full" pInputText type="text" placeholder="Buscar Categoria"
                    (input)="dt1.filterGlobal($any($event.target).value, 'contains')" />
            </p-iconfield>
            <ui-button (click)="visibleAdd = true" label="AGREGAR"></ui-button>
        </div>
    </ng-template>

    <ng-template #header>
        <tr>
            <th pSortableColumn="nombre" style="width:5%">NOMBRE<p-sortIcon field="name" /></th>
            <th pSortableColumn="area" style="width:10%">
                DESCRIPCIÃ“N <p-sortIcon field="area" />
            </th>

            <th pSortableColumn="accion" style="width:2%">ACCIONES<p-sortIcon field="accion" /></th>
        </tr>
    </ng-template>

    <ng-template #body let-categorias>
        <tr [pSelectableRow]="categorias">
            <td>
                <span class="ml-1 align-middle">{{ categorias.nombre }}</span>
            </td>
            <td>
                <div class="flex items-center gap-2">
                    <span class="ml-1 align-middle">{{ categorias.descripcion }}</span>
                </div>
            </td>
            <td>
                <div class="flex items-center gap-2">
                    <button pButton type="button" (click)="visibleAdd = true; seleccionarCategoria(categorias)"
                        icon="pi pi-pencil" class="p-button-rounded p-button-success p-button-text"></button>
                    <button pButton type="button" (click)="eliminarConfirm(categorias)" icon="pi pi-trash"
                        class="p-button-rounded p-button-danger p-button-text"></button>
                </div>
                </td>
        </tr>
    </ng-template>

    <ng-template emptymessage>
        <tr>
            <td colspan="4">NO SE ENCUENTRAN PROVEEDORES DISPONIBLES</td>
        </tr>
    </ng-template>
</p-table>

@if (visibleAdd) {
<app-add-edit-categoria [(visible)]="visibleAdd" ></app-add-edit-categoria>
}